#!/bin/sh
#
# `bk` : Bookmark manager
#
# Dependencies:
# - POSIX `[` `printf` `read`
# - `zet`
#
# Environment: -

add() {
	if [ $# -eq 0 ]; then
		while read -r url; do
			set -- "$url"
		done
	fi

	for url do
		printf 'url: %s\n' "$url"

		# Read user input from stderr, as stdin may be reading
		# from a pipe.
		printf 'title: '
		IFS= read -r title <&2

		zet - <<-EOF
		# $title

		+Bookmarks

		<$url>

		EOF
	done
}

main() {
	case $1 in
		-a|-|'') add "$@" ;;
		-e)      zet -e +Bookmarks "$@" ;;
		*)       zet -b +Bookmarks "$@" ;;
	esac
}

main "$@"

